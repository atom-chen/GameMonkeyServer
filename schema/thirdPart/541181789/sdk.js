var MorefunUtil=function(){function e(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function t(e,t){return e<<t|e>>>32-t}function n(n,o,i,r,a,d){return e(t(e(e(o,n),e(r,d)),a),i)}function o(e,t,o,i,r,a,d){return n(t&o|~t&i,e,t,r,a,d)}function i(e,t,o,i,r,a,d){return n(t&i|o&~i,e,t,r,a,d)}function r(e,t,o,i,r,a,d){return n(t^o^i,e,t,r,a,d)}function a(e,t,o,i,r,a,d){return n(o^(t|~i),e,t,r,a,d)}function d(t,n){t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;var d,u,s,c,l,f=1732584193,m=-271733879,h=-1732584194,g=271733878;for(d=0;d<t.length;d+=16)u=f,s=m,c=h,l=g,f=o(f,m,h,g,t[d],7,-680876936),g=o(g,f,m,h,t[d+1],12,-389564586),h=o(h,g,f,m,t[d+2],17,606105819),m=o(m,h,g,f,t[d+3],22,-1044525330),f=o(f,m,h,g,t[d+4],7,-176418897),g=o(g,f,m,h,t[d+5],12,1200080426),h=o(h,g,f,m,t[d+6],17,-1473231341),m=o(m,h,g,f,t[d+7],22,-45705983),f=o(f,m,h,g,t[d+8],7,1770035416),g=o(g,f,m,h,t[d+9],12,-1958414417),h=o(h,g,f,m,t[d+10],17,-42063),m=o(m,h,g,f,t[d+11],22,-1990404162),f=o(f,m,h,g,t[d+12],7,1804603682),g=o(g,f,m,h,t[d+13],12,-40341101),h=o(h,g,f,m,t[d+14],17,-1502002290),m=o(m,h,g,f,t[d+15],22,1236535329),f=i(f,m,h,g,t[d+1],5,-165796510),g=i(g,f,m,h,t[d+6],9,-1069501632),h=i(h,g,f,m,t[d+11],14,643717713),m=i(m,h,g,f,t[d],20,-373897302),f=i(f,m,h,g,t[d+5],5,-701558691),g=i(g,f,m,h,t[d+10],9,38016083),h=i(h,g,f,m,t[d+15],14,-660478335),m=i(m,h,g,f,t[d+4],20,-405537848),f=i(f,m,h,g,t[d+9],5,568446438),g=i(g,f,m,h,t[d+14],9,-1019803690),h=i(h,g,f,m,t[d+3],14,-187363961),m=i(m,h,g,f,t[d+8],20,1163531501),f=i(f,m,h,g,t[d+13],5,-1444681467),g=i(g,f,m,h,t[d+2],9,-51403784),h=i(h,g,f,m,t[d+7],14,1735328473),m=i(m,h,g,f,t[d+12],20,-1926607734),f=r(f,m,h,g,t[d+5],4,-378558),g=r(g,f,m,h,t[d+8],11,-2022574463),h=r(h,g,f,m,t[d+11],16,1839030562),m=r(m,h,g,f,t[d+14],23,-35309556),f=r(f,m,h,g,t[d+1],4,-1530992060),g=r(g,f,m,h,t[d+4],11,1272893353),h=r(h,g,f,m,t[d+7],16,-155497632),m=r(m,h,g,f,t[d+10],23,-1094730640),f=r(f,m,h,g,t[d+13],4,681279174),g=r(g,f,m,h,t[d],11,-358537222),h=r(h,g,f,m,t[d+3],16,-722521979),m=r(m,h,g,f,t[d+6],23,76029189),f=r(f,m,h,g,t[d+9],4,-640364487),g=r(g,f,m,h,t[d+12],11,-421815835),h=r(h,g,f,m,t[d+15],16,530742520),m=r(m,h,g,f,t[d+2],23,-995338651),f=a(f,m,h,g,t[d],6,-198630844),g=a(g,f,m,h,t[d+7],10,1126891415),h=a(h,g,f,m,t[d+14],15,-1416354905),m=a(m,h,g,f,t[d+5],21,-57434055),f=a(f,m,h,g,t[d+12],6,1700485571),g=a(g,f,m,h,t[d+3],10,-1894986606),h=a(h,g,f,m,t[d+10],15,-1051523),m=a(m,h,g,f,t[d+1],21,-2054922799),f=a(f,m,h,g,t[d+8],6,1873313359),g=a(g,f,m,h,t[d+15],10,-30611744),h=a(h,g,f,m,t[d+6],15,-1560198380),m=a(m,h,g,f,t[d+13],21,1309151649),f=a(f,m,h,g,t[d+4],6,-145523070),g=a(g,f,m,h,t[d+11],10,-1120210379),h=a(h,g,f,m,t[d+2],15,718787259),m=a(m,h,g,f,t[d+9],21,-343485551),f=e(f,u),m=e(m,s),h=e(h,c),g=e(g,l);return[f,m,h,g]}function u(e){var t,n="",o=32*e.length;for(t=0;t<o;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function s(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var o=8*e.length;for(t=0;t<o;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function c(e){return u(d(s(e),8*e.length))}function l(e,t){var n,o,i=s(e),r=[],a=[];for(r[15]=a[15]=void 0,i.length>16&&(i=d(i,8*e.length)),n=0;n<16;n+=1)r[n]=909522486^i[n],a[n]=1549556828^i[n];return o=d(r.concat(s(t)),512+8*t.length),u(d(a.concat(o),640))}function f(e){var t,n,o="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=o.charAt(t>>>4&15)+o.charAt(15&t);return i}function m(e){return unescape(encodeURIComponent(e))}function h(e){return c(m(e))}function g(e){return f(h(e))}function p(e,t){return l(m(e),m(t))}function v(e,t){return f(p(e,t))}function b(e,t,n){return t?n?p(t,e):v(t,e):n?h(e):g(e)}function y(e){for(var t="",n=Object.keys(e).sort(),o=0;o<n.length;o++)t+=e[n[o]];return b(t+"EWTS1XURO809DH64KPB23AQVNI5GFZJ7CMYL")}function E(e,t){for(var n="",o=Object.keys(e).sort(),i=0;i<o.length;i++)n+=e[o[i]];return b(n+""+t)}function A(e){var t="";for(var n in e)t+="&"+n+"="+e[n];return t}function k(){if(void 0!==localStorage.morefun_user_deviceid)return localStorage.morefun_user_deviceid;for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var o="H5_"+e.join("");return localStorage.morefun_user_deviceid=o,localStorage.morefun_user_deviceid}var S={};return S.getDeviceId=k,S.sign=y,S.SignForCP=E,S.toRqStr=A,S}(),MoreFun={init:function(e){if(!e.app_id)return void alert("缺少app_id");this.app_id=e.app_id,this.app_key=e.app_key,this.game_version=e.game_version,this.is_debug=e.is_debug,this.is_debug?this.Host="http://omsdev.gamemorefun.com":this.Host="http://sdk.gamemorefun.com";var t=MorefunUtil.getDeviceId(),n={app_id:this.app_id,device_type:"4",device_id:t,version:this.game_version},o=MorefunUtil.sign(n);this.loginUrl=this.Host+"/mobile/v1/passport?signature="+o+MorefunUtil.toRqStr(n),console.log("------SDK Version:1.0.2-------");var i,r=document.documentElement.clientWidth,a=document.documentElement.clientHeight,d=(document.documentElement.clientHeight-a)/2,u=(document.documentElement.clientWidth-r)/2,s="*{margin:0;padding:0}.morefun-dot-figure { position: absolute;margin: auto;top: 0; bottom: 0; left: 0; right: 0;width: 6.250em; height: 6.250em;animation: morefun-rotate 2.4s linear infinite;}.morefun-white { top: 0; bottom: 0; left: 0; right: 0; background: white; animation: morefun-flash 2.4s linear infinite;opacity: 0;}.morefun-dot {position: absolute;margin: auto;width: 2.4em; height: 2.4em;border-radius: 100%;transition: all 1s ease;}.morefun-dot:nth-child(2) { top: 0; bottom: 0; left: 0; background: #FF4444; animation: morefun-dotsY 2.4s linear infinite; }.morefun-dot:nth-child(3) { left: 0; right: 0; top: 0; background: #FFBB33; animation: morefun-dotsX 2.4s linear infinite; }.morefun-dot:nth-child(4) { top: 0; bottom: 0; right: 0; background: #99CC00; animation: morefun-dotsY 2.4s linear infinite; }.morefun-dot:nth-child(5) { left: 0; right: 0; bottom: 0; background: #33B5E5; animation: morefun-dotsX 2.4s linear infinite; }@keyframes morefun-rotate {0% { transform: rotate( 0 ); }10% { width: 6.250em; height: 6.250em; }66% { width: 2.4em; height: 2.4em; }100%{ transform: rotate(360deg); width: 6.250em; height: 6.250em; }}@keyframes morefun-dotsY {66% { opacity: .1; width: 2.4em; }77%{ opacity: 1; width: 0; }}@keyframes morefun-dotsX {66% { opacity: .1; height: 2.4em;}77%{ opacity: 1; height: 0; }}@keyframes morefun-flash {33% { opacity: 0; border-radius: 0%; }55%{ opacity: .6; border-radius: 100%; }66%{ opacity: 0; }}#morefun-jssdk-section {background: rgba(0, 0, 0, 0.6);position: fixed;top: 0;right: 0;bottom: 0;left: 0;z-index: 115;text-align: center;}#morefun-jssdk-section-section {position: absolute;top:"+d+"px;left:"+u+"px;width:"+r+"px;height:"+a+"px;border-radius:0;z-index: 116;color: #333;background-color: #fff;/*box-shadow: 0 0 .8em #fff;*/}#morefun-jssdk-section-section-div {position:relative;width:100%;height:100%;background: #222;overflow:hidden;}#morefun-jssdk-section-section-div.overflow{background: #fff;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:auto;}#morefun-jssdk-section-section-div-iframe {width:100%;height:99%;border:0;outline:0;}",c=document.getElementsByTagName("script")[0];i=document.createElement("style"),i.innerHTML=s,c.parentNode.insertBefore(i,c),window.addEventListener("message",function(e){if(new RegExp(/https?:\/\/(([a-zA-Z0-9_-])+(\.)?)gamemorefun.com(:\d+)?/).test(e.origin))if("onLogin"==e.data.action){delete e.data.action,delete e.data.signature;var t=MorefunUtil.SignForCP(e.data,this.MoreFun.app_key);e.data.signature=t,localStorage.uuid=e.data.uuid,localStorage.token=e.data.token,localStorage.loginData=JSON.stringify(e.data),this.MoreFun.onLogin(e.data),this.MoreFun.close()}else"onClose"==e.data.action&&(delete e.data.action,"pay success"==e.data.data&&this.MoreFun.onPaySuccess(),this.MoreFun.close())},!1)},login:function(e){if(this.onLogin=e,null!=localStorage.loginData)return void this.onLogin(JSON.parse(localStorage.loginData));this.openView(this.loginUrl,!1)},pay:function(e,t,n,o,i,r){if(void 0==localStorage.uuid||void 0==localStorage.token)return void console.log("please login first!");this.onPaySuccess=r,req_obj={app_id:this.app_id,uuid:localStorage.uuid,product_id:e,tag:"ali",token:localStorage.token,device_type:"4",extInfo:i},str_sign=MorefunUtil.sign(req_obj);var a=this.Host+"/mobile/v1/pay?signature="+str_sign+MorefunUtil.toRqStr(req_obj);this.openView(a,!0)},logout:function(e){this.onLogout=e,delete localStorage.uuid,delete localStorage.token,delete localStorage.loginData,this.onLogout()},close:function(){document.body.removeChild(this.section)},openView:function(e,t){var n=document.createElement("div");this.section=n,n.id="morefun-jssdk-section";var o=document.createElement("div");o.id="morefun-jssdk-section-section";var i=document.createElement("img");this.btn_close=i,i.style="position:absolute;with:30px;height:30px;left:10px;top:10px",t||(i.style.display="none"),i.src="data:image/jpeg;base64,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",i.onclick=function(){document.body.removeChild(n)};var r=document.createElement("div");r.id="morefun-jssdk-section-section-div";var a=document.createElement("figure");a.className="morefun-dot-figure";var d=document.createElement("div");d.className="morefun-dot morefun-white";var u=document.createElement("div");u.className="morefun-dot";var s=document.createElement("div");s.className="morefun-dot";var c=document.createElement("div");c.className="morefun-dot";var l=document.createElement("div");l.className="morefun-dot",a.appendChild(d),a.appendChild(u),a.appendChild(s),a.appendChild(c),a.appendChild(l),r.appendChild(a);var f=document.createElement("iframe");f.src=e,f.id="morefun-jssdk-section-section-div-iframe",this.iframeLoaded(f,function(){a.style.display="none",d.style.display="none",u.style.display="none",s.style.display="none",c.style.display="none",l.style.display="none",r.className="overflow"}),r.appendChild(f),o.appendChild(r),o.appendChild(i),n.appendChild(o),document.body.appendChild(n),console.log(f.contentWindow),history.pushState(null,null,document.URL),window.addEventListener("popstate",function(){history.pushState(null,null,document.URL)})},iframeLoaded:function(e,t){e.attachEvent?e.attachEvent("onload",function(){t&&"function"==typeof t&&t()}):e.onload=function(){t&&"function"==typeof t&&t()}}};window.morefunAsyncInit();